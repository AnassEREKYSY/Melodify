"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[440],{5440:(F,c,n)=>{n.r(c),n.d(c,{ArtistDetailsComponent:()=>_});var g=n(3189),a=n(177),t=n(3953),p=n(1266),l=n(1626);let f=(()=>{class i{http;apiUrl=p.c.apiUrl;constructor(o){this.http=o}getArtistById(o){const e=localStorage.getItem("accessToken"),s=new l.Lr({Authorization:`Bearer ${e}`});return this.http.get(`${this.apiUrl}artists/one/${o}`,{headers:s})}getArtistTopSongs(o){const e=localStorage.getItem("accessToken"),s=new l.Lr({Authorization:`Bearer ${e}`});return this.http.get(`${this.apiUrl}artists/songs/${o}`,{headers:s})}static \u0275fac=function(e){return new(e||i)(t.KVO(l.Qq))};static \u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var d=n(3340),h=n(5559);function m(i,r){if(1&i&&t.nrm(0,"img",15),2&i){const o=t.XpG(2);t.Y8G("src",o.artist.imageUrl,t.B4B)}}function u(i,r){1&i&&t.nrm(0,"div",16)}function x(i,r){if(1&i&&(t.j41(0,"span",17),t.EFF(1),t.k0s()),2&i){const o=t.XpG(2);t.R7$(),t.Lme(" (",o.artist.genres.slice(0,3).join(", "),"",o.artist.genres.length>3?", ...":"",") ")}}function w(i,r){1&i&&(t.j41(0,"div",18),t.EFF(1," No songs found! "),t.k0s())}function v(i,r){if(1&i){const o=t.RV6();t.j41(0,"app-song",19),t.bIt("playRequest",function(s){t.eBV(o);const A=t.XpG(2);return t.Njj(A.onPlay(s))}),t.k0s()}if(2&i){const o=r.$implicit,e=t.XpG(2);t.Y8G("song",o)("showDeleteButton",e.shouldShowDeleteButton)}}function I(i,r){if(1&i){const o=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4),t.DNE(3,m,1,1,"img",5)(4,u,1,0,"ng-template",null,0,t.C5r),t.k0s(),t.j41(6,"div",6)(7,"h2",7),t.EFF(8),t.DNE(9,x,2,2,"span",8),t.k0s(),t.j41(10,"div",9),t.EFF(11),t.k0s(),t.j41(12,"div",10),t.EFF(13),t.k0s(),t.j41(14,"button",11),t.bIt("click",function(){t.eBV(o);const s=t.XpG();return t.Njj(s.toggleFollow())}),t.EFF(15),t.k0s()()(),t.DNE(16,w,2,0,"div",12),t.j41(17,"div",13),t.DNE(18,v,1,2,"app-song",14),t.k0s()()}if(2&i){const o=t.sdS(5),e=t.XpG();t.R7$(3),t.Y8G("ngIf",e.artist.imageUrl)("ngIfElse",o),t.R7$(5),t.SpI(" ",e.artist.name||"Unknown Artist"," "),t.R7$(),t.Y8G("ngIf",e.artist.genres.length),t.R7$(2),t.SpI("",e.formatFollowers(e.artist.followers.total||0)," Followers"),t.R7$(2),t.SpI("Popularity: ",e.artist.popularity,""),t.R7$(2),t.SpI(" ",e.isFollowing?"Unfollow":"Follow"," "),t.R7$(),t.Y8G("ngIf",0===e.songs.length),t.R7$(2),t.Y8G("ngForOf",e.songs)}}let _=(()=>{class i{artistService;followedArtistService;route;artistId;shouldShowDeleteButton=!1;songs=[];artist;isFollowing=!1;constructor(o,e,s){this.artistService=o,this.followedArtistService=e,this.route=s}ngOnInit(){this.artistId=this.route.snapshot.paramMap.get("id"),this.artistId&&(this.getArtistDetails(),this.getArtistSongs(),this.checkIfFollowing())}getArtistDetails(){this.artistService.getArtistById(this.artistId).subscribe({next:o=>{this.artist=o},error:o=>{console.error("Error fetching artist with id: "+this.artistId,o)}})}getArtistSongs(){this.artistService.getArtistTopSongs(this.artistId).subscribe({next:o=>{this.songs=o},error:o=>{console.error("Error fetching songs for artist with id: "+this.artistId,o)}})}followArtist(){this.followedArtistService.followArtist(this.artistId).subscribe({next:()=>{this.isFollowing=!0},error:o=>{console.error("Error following artist:",o)}})}unfollowArtist(){this.followedArtistService.unfollowArtist(this.artistId).subscribe({next:()=>{this.isFollowing=!1},error:o=>{console.error("Error unfollowing artist:",o)}})}checkIfFollowing(){this.followedArtistService.getFollowedArtist().subscribe({next:o=>{this.isFollowing=o.some(e=>e.id===this.artistId)},error:o=>{console.error("Error checking if following artist:",o)}})}toggleFollow(){this.isFollowing?this.unfollowArtist():this.followArtist()}onPlay(o){}formatFollowers(o){return o>=1e6?(o/1e6).toFixed(1).replace(/\.0$/,"")+"M":o>=1e3?(o/1e3).toFixed(1).replace(/\.0$/,"")+"K":o.toString()}static \u0275fac=function(e){return new(e||i)(t.rXU(f),t.rXU(d.L),t.rXU(h.nX))};static \u0275cmp=t.VBU({type:i,selectors:[["app-artist-details"]],decls:1,vars:1,consts:[["noImage",""],["class","artist-container",4,"ngIf"],[1,"artist-container"],[1,"artist-header"],[1,"artist-image-container"],["alt","Artist Image","class","artist-image",3,"src",4,"ngIf","ngIfElse"],[1,"artist-info"],[1,"artist-name"],["class","genres",4,"ngIf"],[1,"followers"],[1,"popularity"],[1,"follow-button",3,"click"],["class","text-gray-400 text-center mt-6",4,"ngIf"],[1,"song-list"],[3,"song","showDeleteButton","playRequest",4,"ngFor","ngForOf"],["alt","Artist Image",1,"artist-image",3,"src"],[1,"artist-image","no-image"],[1,"genres"],[1,"text-gray-400","text-center","mt-6"],[3,"playRequest","song","showDeleteButton"]],template:function(e,s){1&e&&t.DNE(0,I,19,9,"div",1),2&e&&t.Y8G("ngIf",s.artistId&&s.artist)},dependencies:[g.R,a.MD,a.Sq,a.bT],styles:[".artist-container[_ngcontent-%COMP%]{background-color:#121212;color:#fff;font-family:Arial,sans-serif;padding:50px;min-height:100vh;display:flex;flex-direction:column;position:relative}.artist-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;width:100%;margin-bottom:30px}.artist-image-container[_ngcontent-%COMP%]{margin-right:30px}.artist-image[_ngcontent-%COMP%]{width:300px;height:300px;object-fit:cover;border-radius:50%}.artist-info[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:column;min-height:300px;padding:10px}.artist-name[_ngcontent-%COMP%]{font-size:54px;font-weight:700;margin-top:60px;display:flex;align-items:center}.artist-name[_ngcontent-%COMP%]   .genres[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin-left:15px;color:#ccc}.followers[_ngcontent-%COMP%]{font-size:20px}.popularity[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin-top:5px}.follow-button[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:none;padding:8px 16px;font-size:14px;cursor:pointer;border-radius:50px;font-weight:700;transition:background .3s ease,color .3s ease;margin-top:15px;width:auto;max-width:200px;border:1px solid white}.follow-button[_ngcontent-%COMP%]:hover{background-color:#fff;border:1px solid transparent;color:#121212}.song-list[_ngcontent-%COMP%]{flex-grow:1;margin-top:20px;padding:20px}.no-image[_ngcontent-%COMP%]{width:300px;height:300px;background-color:#444;border-radius:50%}"]})}return i})()}}]);