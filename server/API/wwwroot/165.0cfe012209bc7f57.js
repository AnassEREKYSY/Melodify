"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[165],{2165:(m,c,s)=>{s.r(c),s.d(c,{LoginComponent:()=>g});var t=s(3953),a=s(177),l=s(5559),u=s(1266),h=s(1626);let p=(()=>{class i{http;apiUrl=u.c.apiUrl;constructor(e){this.http=e}getLoginUrl(){return this.http.get(`${this.apiUrl}spotify-auth/get-url-login`,{responseType:"text"})}handleCallback(e,o){return this.http.get(`${this.apiUrl}spotify-auth/callback?code=${e}&state=${o}`)}static \u0275fac=function(o){return new(o||i)(t.KVO(h.Qq))};static \u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var f=s(4005);let g=(()=>{class i{route;router;loginService;snackBarService;platformId;constructor(e,o,n,r,d){this.route=e,this.router=o,this.loginService=n,this.snackBarService=r,this.platformId=d}loginWithSpotify(){this.loginService.getLoginUrl().subscribe(e=>{window.location.href=e})}ngOnInit(){this.route.queryParams.subscribe(e=>{const o=e.code,n=e.state;o&&n&&this.handleSpotifyCallback(o,n)})}handleSpotifyCallback(e,o){this.loginService.handleCallback(e,o).subscribe(n=>{const r=n.userProfile;(0,a.UE)(this.platformId)&&localStorage.setItem("accessToken",r.accessToken),this.router.navigate(["/home"]),this.snackBarService.success("You're logged successfully")},n=>{this.snackBarService.success("Authentication failed"+n)})}static \u0275fac=function(o){return new(o||i)(t.rXU(l.nX),t.rXU(l.Ix),t.rXU(p),t.rXU(f.v),t.rXU(t.Agw))};static \u0275cmp=t.VBU({type:i,selectors:[["app-login"]],decls:7,vars:0,consts:[[1,"flex","justify-center","items-center","h-screen","bg-[#121212]"],[1,"flex","flex-col","items-center","text-white","w-full","max-w-md","px-6"],["src","https://upload.wikimedia.org/wikipedia/commons/2/26/Spotify_logo_with_text.svg","alt","Spotify Logo",1,"mb-8","p-8"],[1,"w-full","py-4","px-2","bg-[#121212]","border-2","border-[#1DB954]","rounded-full","text-white","font-bold","text-lg","focus:outline-none","hover:bg-[#1DB954]","hover:text-black","transition","duration-300",3,"click"],[1,"flex","justify-center","items-center","space-x-2"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"img",2),t.j41(3,"button",3),t.bIt("click",function(){return n.loginWithSpotify()}),t.j41(4,"div",4)(5,"span"),t.EFF(6,"Login with Spotify"),t.k0s()()()()())},encapsulation:2})}return i})()}}]);