"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[165],{2165:(m,s,r)=>{r.r(s),r.d(s,{LoginComponent:()=>f});var t=r(3953),a=r(177),c=r(5559),u=r(1266),h=r(1626);let g=(()=>{class o{http;apiUrl=u.c.apiUrl;constructor(e){this.http=e}getLoginUrl(){return this.http.get(`${this.apiUrl}spotify-auth/get-url-login`)}exchangeCode(e){return this.http.get(`${this.apiUrl}spotify-auth/exchange?code=${e}`)}static \u0275fac=function(i){return new(i||o)(t.KVO(h.Qq))};static \u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var p=r(4005);let f=(()=>{class o{route;router;loginService;snackBarService;platformId;constructor(e,i,n,l,d){this.route=e,this.router=i,this.loginService=n,this.snackBarService=l,this.platformId=d}loginWithSpotify(){this.loginService.getLoginUrl().subscribe(e=>{window.location.href=e.url})}ngOnInit(){this.route.queryParams.subscribe(e=>{const i=e.code;i&&this.loginService.exchangeCode(i).subscribe({next:n=>{(0,a.UE)(this.platformId)&&localStorage.setItem("accessToken",n.userProfile.accessToken),this.router.navigate(["/home"]),this.snackBarService.success("You're logged successfully")},error:()=>{this.snackBarService.error("Authentication failed")}})})}static \u0275fac=function(i){return new(i||o)(t.rXU(c.nX),t.rXU(c.Ix),t.rXU(g),t.rXU(p.v),t.rXU(t.Agw))};static \u0275cmp=t.VBU({type:o,selectors:[["app-login"]],decls:5,vars:0,consts:[[1,"flex","justify-center","items-center","h-screen","bg-[#121212]"],[1,"flex","flex-col","items-center","text-white","w-full","max-w-md","px-6"],["src","https://upload.wikimedia.org/wikipedia/commons/2/26/Spotify_logo_with_text.svg","alt","Spotify Logo",1,"mb-8","p-8"],[1,"w-full","py-4","px-2","bg-[#121212]","border-2","border-[#1DB954]","rounded-full","text-white","font-bold","text-lg","hover:bg-[#1DB954]","hover:text-black","transition","duration-300",3,"click"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"img",2),t.j41(3,"button",3),t.bIt("click",function(){return n.loginWithSpotify()}),t.EFF(4," Login with Spotify "),t.k0s()()())},encapsulation:2})}return o})()}}]);