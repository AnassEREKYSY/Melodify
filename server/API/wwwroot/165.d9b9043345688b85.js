"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[165],{2165:(m,l,n)=>{n.r(l),n.d(l,{LoginComponent:()=>f});var t=n(3953),a=n(177),s=n(5559),h=n(1266),u=n(1626);let p=(()=>{class i{http;apiUrl=h.c.apiUrl;constructor(e){this.http=e}getLoginUrl(){return this.http.get(`${this.apiUrl}spotify-auth/get-url-login`)}handleCallback(e,o){return this.http.get(`${this.apiUrl}spotify-auth/callback?code=${e}&state=${o}`)}static \u0275fac=function(o){return new(o||i)(t.KVO(u.Qq))};static \u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var g=n(4005);let f=(()=>{class i{route;router;loginService;snackBarService;platformId;constructor(e,o,r,c,d){this.route=e,this.router=o,this.loginService=r,this.snackBarService=c,this.platformId=d}loginWithSpotify(){this.loginService.getLoginUrl().subscribe(e=>{window.location.href=e.url})}ngOnInit(){this.route.queryParams.subscribe(e=>{const o=e.code,r=e.state;o&&r&&this.handleSpotifyCallback(o,r)})}handleSpotifyCallback(e,o){this.loginService.handleCallback(e,o).subscribe(()=>{(0,a.UE)(this.platformId)&&localStorage.setItem("spotify_logged","true"),this.router.navigate(["/home"]),this.snackBarService.success("You're logged successfully")})}static \u0275fac=function(o){return new(o||i)(t.rXU(s.nX),t.rXU(s.Ix),t.rXU(p),t.rXU(g.v),t.rXU(t.Agw))};static \u0275cmp=t.VBU({type:i,selectors:[["app-login"]],decls:5,vars:0,consts:[[1,"flex","justify-center","items-center","h-screen","bg-[#121212]"],[1,"flex","flex-col","items-center","text-white","w-full","max-w-md","px-6"],["src","https://upload.wikimedia.org/wikipedia/commons/2/26/Spotify_logo_with_text.svg","alt","Spotify Logo",1,"mb-8","p-8"],[1,"w-full","py-4","px-2","bg-[#121212]","border-2","border-[#1DB954]","rounded-full","text-white","font-bold","text-lg","hover:bg-[#1DB954]","hover:text-black","transition","duration-300",3,"click"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"img",2),t.j41(3,"button",3),t.bIt("click",function(){return r.loginWithSpotify()}),t.EFF(4," Login with Spotify "),t.k0s()()())},encapsulation:2})}return i})()}}]);